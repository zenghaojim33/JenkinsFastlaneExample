fastlane_version "2.24.0"

default_platform :ios

platform :ios do
   lane :example do
      puts("this is my first ğŸš€ lane")
   end

   lane :ci do|options|
branch = options[:branch]
# è‡ªåŠ¨è·å–å½“å‰appç‰ˆæœ¬å·ï¼Œå¹¶è¡¥å……å½“å‰ç¼–è¯‘æ—¶é—´ä¸ºåç¼€
build_no = get_version_number + '.' + Time.new.strftime("%m%d%H%M")

puts "Begin to run ci"

# é€’å¢build number
increment_build_number(build_number: build_no)

# å¼€å§‹æ‰“åŒ…
gym(
# æ˜¯å¦æ¸…ç©ºä»¥å‰çš„ç¼–è¯‘ä¿¡æ¯ trueï¼šæ˜¯
clean:true,
# æŒ‡å®šæ‰“åŒ…æ–¹å¼ï¼ŒRelease æˆ–è€… Debug
configuration:"Release",
# æŒ‡å®šæ‰“åŒ…æ‰€ä½¿ç”¨çš„è¾“å‡ºæ–¹å¼ï¼Œç›®å‰æ”¯æŒapp-store, package, ad-hoc, enterprise, development
export_method:"development",
# æŒ‡å®šè¾“å‡ºæ–‡ä»¶å¤¹
output_directory:"./fastlane/build",
)

# ä½¿ç”¨fir-cliä¸Šä¼ ipa
# è¯·å°†SDAutolayoutDemoæ”¹æˆä½ é¡¹ç›®è¦æ‰“åŒ…çš„åç§°
# è¯·å°†-Tåçš„æ•°å­—æ›´æ”¹ä¸ºåœ¨firç”³è¯·çš„APIToken
sh "fir publish ./build/SDAutolayoutDemo.ipa -T 396exxxx4b88b012474fcc7c0e1xxxx"

end


end


